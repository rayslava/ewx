<?xml version="1.0" encoding="UTF-8"?>
<protocol name="emacs_wayland_protocol">
  <copyright>
    Copyright 2022 Michael Bauer

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted, provided that the above
    copyright notice and this permission notice appear in all copies.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
    WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
    MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
    ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
    WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
    ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
    OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
  </copyright>

  <description summary="Let emacs manage wayland windows and input.">
    One ewp_layout client decides the layout for new surfaces (= windows).

    The wayland server sends the new_surface event on xdg_shell
    toplevel creation and creates a ewp_surface object.

    The layout client can then layout this ewp_surface object.

    in ewp:   ewp_layout             -> ewp_surface
    in emacs: client=events,requests -> wayland buffer

    ewp_layout object gets notified about new toplevel surfaces -> ewp_surface
  </description>

  <interface name="ewp_layout" version="1">
    <description summary="Manage window layout">
      An interface for a window manager client
    </description>

    <event name="new_surface">
      <description summary="New surface">
        Inform the client after a new surface was added.
        The client uses the new ewp_surface object to manage this surface.
      </description>
      <arg name="id" type="new_id" interface="ewp_surface" summary="The new ewp_surface object"/>
      <arg name="app_id" type="string" summary="shell app id"/>
      <arg name="title" type="string" summary="shell title"/>
      <arg name="pid" type="uint" summary="pid"/>
    </event>
  </interface>
  
  <interface name="ewp_surface" version="1">
    <description summary="Manage surface layout">
      An interface to manage a single toplevel surface.
    </description>

    <request name="layout">
      <description summary="Layout surface">
        Layout surface by setting its x and y position and its width and height size.
        Shows the surface at x and y of its parent with width and height.
      </description>
      <arg name="x" type="uint" summary="x coordinate of window origin"/>
      <arg name="y" type="uint" summary="y coordinate of window origin"/>
      <arg name="width" type="uint" summary="width of window"/>
      <arg name="height" type="uint" summary="height of window"/>
    </request>

    <request name="hide">
      <description summary="Hide">
        Hide this surface.
      </description>
    </request>

    <request name="destroy" type="destructor">
      <description summary="Destroy request">
        Request destruction of this surface.
      </description>
    </request>

    <event name="destroy" type="destructor">
      <description summary="Destroy event">
        Inform the client of the destruction of this surface.
      </description>
    </event>

    <event name="update_title">
      <description summary="Updated title">
        Inform the client about a new title for this surface.
      </description>
      <arg name="title" type="string" summary="shell title"/>
    </event>

  </interface>
  <!-- A method to group (and commit) changes? -->
</protocol>
