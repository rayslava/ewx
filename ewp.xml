<?xml version="1.0" encoding="UTF-8"?>
<protocol name="emacs_wayland_protocol">
  <copyright>
    Copyright 2022 Michael Bauer

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted, provided that the above
    copyright notice and this permission notice appear in all copies.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
    WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
    MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
    ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
    WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
    ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
    OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
  </copyright>

  <description summary="Let emacs manage wayland windows and input.">
  </description>

  <interface name="ewp_layout" version="1">
    <description summary="Manage window layout">
      An interface for a window manager client
    </description>

    <event name="new_surface">
      <description summary="New surface">
        Inform the client after a new surface was added.
        The client uses the new ewp_surface object to manage this surface.
      </description>
      <arg name="id" type="new_id" interface="ewp_surface" summary="The new ewp_surface object"/>
      <arg name="app_id" type="string" summary="shell app id"/>
      <arg name="title" type="string" summary="shell title"/>
      <arg name="pid" type="uint" summary="pid"/>
    </event>
  </interface>
  
  <interface name="ewp_surface" version="1">
    <description summary="Manage surface layout">
      An interface to manage a single toplevel surface.
    </description>

    <request name="layout">
      <description summary="Layout surface">
        Layout surface by setting its x and y position and its width and height size.
        Shows the surface at x and y of its parent with width and height.
        Creates a view object for this layout.
      </description>
      <arg name="id" type="new_id" interface="ewp_view" summary="The new ewp_view object"/>
      <arg name="x" type="uint" summary="x coordinate of window origin"/>
      <arg name="y" type="uint" summary="y coordinate of window origin"/>
      <arg name="width" type="uint" summary="width of window"/>
      <arg name="height" type="uint" summary="height of window"/>
    </request>

    <event name="update_title">
      <description summary="updated title">
        Inform the client about a new title for this surface.
      </description>
      <arg name="title" type="string" summary="shell title"/>
    </event>

    <event name="destroy" type="destructor">
      <description summary="destroy event">
        Inform the client of the destruction of this interface.
      </description>
    </event>
  </interface>

  <interface name="ewp_view" version="1">
    <description summary="A mapped surface">
      If a ewp_surface is layed out an ewp_view is created. This is its interface.
    </description>

    <request name="destroy" type="destructor">
      <description summary="destroy the view">
        Request destruction of the view. This deletes the ewp_view
        object and hides it. Destroying the view is equivalent to unmapping the surface.
      </description>
    </request>
  </interface>

  <!-- A method to group (and commit) changes? -->
</protocol>
